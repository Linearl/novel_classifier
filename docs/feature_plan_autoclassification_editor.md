# 自动分类配置编辑功能 - 设计方案与实施计划

本文档旨在规划“自动分类配置编辑”功能的多种实现方案，并为后续开发提供清晰的路线图。

## 核心需求

用户需要一个方便、直观的方式来修改 `config/keywords_config.yaml` 文件，以调整自动分类的规则，包括分类的增删改、关键词及其权重的调整、分类阈值的设定等。

---

## 方案评估

### 方案一：使用外部文本编辑器（简化版）

*   **设计思路**:
    *   在GUI界面上添加一个“编辑配置”按钮。
    *   点击该按钮后，程序调用系统指令，使用默认的文本编辑器（如记事本）打开 `config/keywords_config.yaml` 文件。
*   **优点**:
    *   **极速实现**: 开发工作量最小，可以立刻为用户提供一个“能用”的编辑入口。
    *   **完全灵活**: 高级用户可以直接利用YAML的全部功能，不受UI限制。
*   **缺点**:
    *   **体验差，易出错**: 对不熟悉YAML语法的用户极不友好，任何一个缩进或拼写错误都可能导致整个配置加载失败，且程序无法给出明确错误提示。
    *   **无数据验证**: 无法在输入阶段校验数据的有效性（如权重必须是数字）。

### 方案二：结构化表单/树状视图方案 (长期推荐)

*   **设计思路**:
    *   在GUI中创建一个专门的配置管理界面。
    *   **左侧**：使用树状视图展示所有分类，支持右键或按钮进行增、删、改操作。
    *   **右侧**：选中某个分类后，右侧表单会动态加载该分类下的关键词、权重、阈值等信息，并提供相应的输入框、滑块、按钮进行编辑。
    *   所有修改在内存中进行，点击“保存”后，程序负责将内存中的数据结构序列化为正确的YAML格式并写回文件。
*   **优点**:
    *   **用户友好**: 可视化操作，无需学习YAML语法。
    *   **结构清晰，不易出错**: 通过UI保证了配置的结构正确性。
    *   **内置数据验证**: 可以在UI层面约束输入，从源头避免了无效数据。
*   **缺点**:
    *   **开发复杂**: 需要投入较多的时间来设计和实现UI及后台逻辑。

### 方案三：引导式向导方案

*   **设计思路**:
    *   创建一个类似安装向导的多步骤流程来引导用户完成配置。
    *   例如：第一步管理分类 -> 第二步选择分类并管理其关键词 -> 第三步设置权重和阈值 -> 第四步预览并保存。
*   **优点**:
    *   **对新手最友好**: 将复杂的配置任务分解，降低了用户的认知门槛。
*   **缺点**:
    *   **效率低**: 对于只想做微小调整的用户来说，流程过于繁琐。
    *   **开发成本最高**: 状态管理和页面流转最为复杂。

---

## 实施计划

1.  **短期（立即实施）**:
    *   **任务**: 实现 **方案一**。
    *   **目标**: 快速提供一个配置入口。
    *   **步骤**:
        1.  在`gui/main_window.py`中添加一个“编辑分类配置”的按钮。
        2.  为按钮绑定事件，调用`os.startfile`（Windows）或等效的跨平台命令打开`config/keywords_config.yaml`。

2.  **中期（后续迭代）**:
    *   **任务**: 制定 **方案二** 的详细计划。
    *   **目标**: 为实现一个功能完善、体验优秀的配置编辑器做准备。
    *   **步骤**:
        1.  **UI/UX设计**: 绘制界面草图，确定控件布局和交互流程。
        2.  **组件拆分**: 将UI拆分为可复用的组件（如分类树、关键词列表、编辑表单等）。
        3.  **数据流设计**: 设计UI与`ConfigManager`之间的数据同步逻辑。
        4.  **开发排期**: 将上述任务分解为更小的开发子任务，并估算工时。

3.  **长期**:
    *   根据用户反馈和项目发展，决定是否需要实现方案二，并投入开发。
